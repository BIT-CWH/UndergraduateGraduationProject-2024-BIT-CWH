# 2024/04/16
1. 同步kernel最新代码
2. 在async_syscall_test中调用runtime_init初始化运行时和调度器

问题：
1. （已解决：更新kernel）root-tast-demo中main.rs中recv_tcb.tcb_set_affinity(1)的后续语句无法执行（自查了代码，应该不是目前更新的代码的缘故）
2. （已解决：在生成前使用runtime_init初始化运行时，生成调度器）coroutine_spawn生成错误
# 2024/04/15
1. 同步最新代码
2. 为用户态async_syscall_test()中的代码适配最新接口，并修复了无法通过编译的引用问题
3. 在内核中为注册异步系统调用Buffer同时注册内核的用户态中断发送端
4. 修改了uintc中的register_sender函数，新增了sender_id的返回值并做了适配
5. 修改内核态async_syscall_handler()，传入参数新增sender_id，并完成了封装中断发送流程的用户态中断发送函数send_async_syscall_uintr()

问题：
- （已解决：需要定义一个系统调用执行操作，目前先在时钟中断中让协程一直运行以忽略此问题）用户态如何发送系统调用，具体为用户态如何知道CPU繁忙情况并唤醒对应的内核接收协程在空闲CPU上执行
- （已解决：核间中断）协程与线程不同，无法被调度，如何让空闲CPU执行协程
- （已解决：发送端还没注册，注册后直接传入协程即可，传入协程的还得有一个offset）内核处理协程中如何获取sender_id发送用户态中断
- （已解决：更新kernel）root-tast-demo中main.rs中recv_tcb.tcb_set_affinity(1)的后续语句无法执行（自查了代码，应该不是目前更新的代码的缘故）

开发步骤：
- 注册接收端（仿照异步IPC）并将sender_id传入协程
- 仿照网卡驱动完成offset分配，传入协程
- 新增系统调用，供用户态在发现内核协程不在线时使用，该系统调用需要寻找空闲核心执行协程并用到IPI
# 2024/04/14
1. 在rel4_kernel下task_manager中新增函数get_idle_cpu_index  

问题：
- 用户态如何发送系统调用，具体为用户态如何知道CPU繁忙情况并唤醒对应的内核接收协程在空闲CPU上执行（需要定义一个系统调用执行操作？）
- 协程与线程不同，无法被调度，如何让空闲CPU执行协程（内核接收协程是否也为此线程的部分，如果是，相当于一个线程的用户态和内核态在两个CPU上分别运行？）
- 内核处理协程中如何获取sender_id发送用户态中断（通过tcb？tcb中维护了绑定的notification和IPCBuffer，猜测sender_id为IPCBuffer中的uintr_flag）
# 2024/04/13
1. 修改了root-task-demo中async_lib中seL4_Call_with_item的SEND_MAP映射错误

问题：
- （需要定义一个系统调用执行操作？）用户态如何发送系统调用，具体为用户态如何知道CPU繁忙情况并唤醒对应的内核接受协程在空闲CPU上执行
- （通过tcb？）内核处理协程中如何获取sender_id发送用户态中断
# 2024/03/18
完成同步IPC测试与数据分析
# 2024/03/17
阅读论文《L4 microkernels: The lessons from 20 years of research and deployment》并修改部分翻译内容
# 2024/03/16
# 2024/03/15
# 2024/03/14
测试同步IPC代码路径  
发现了由于消息设置不合理导致fastpath_mi_check阻断进入fastpath的问题，已解决  
调整了用户态的部分设置如object_allocator下的tcb.tcb_set_affinity(1)
# 2024/03/13
阅读论文《L4 microkernels: The lessons from 20 years of research and deployment》并修改部分翻译内容
# 2024/03/12
开组会
# 2024/03/11
阅读rel4源码  
阅读sel4介绍文档  
进行部分同步IPC测试  
考虑补充sel4介绍文档中reply_cap代理部分介绍
# 2024/03/10
阅读rel4源码  
阅读sel4介绍文档
进行部分同步IPC测试
# 2024/03/09
阅读rel4源码  
将帮助文档部署到gitbook
# 2024/03/08
阅读rel4源码  
完成rel4 rust侧代码环境配置  
进一步完善帮助文档
# 2024/03/07
阅读rel4源码  
完成帮助文档markdown版本撰写
# 2024/03/05
完成rel4基本环境配置
# 2024/03/02
配置WSL以替换Ubuntu虚拟机  
完成seL4环境配置  
完成仓库搭建  
# 2024/03/01
在Ubuntu虚拟机上initial repo  
在Ubuntu虚拟机上配置seL4环境  